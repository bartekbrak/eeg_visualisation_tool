<body>
    <video width=640 controls>
        <source type="video/mp4" src="data:video/mp4;base64,{{video_data}}">
    </video>
{#    <span id="timer">timer</span>#}
    {{ plot_div|indent(8) }}

<div id="legend_group">
{% for line_groups in line_groups_per_plot %}
    <table class="legend" id="legend{{ loop.index0 }}"><tr>
    {% set outer_loop = loop %}

    {# totals #}
    <td><label>
        {% set total = totals[outer_loop.index0] %}
        <input
                type="checkbox"
                class="toggler"
                checked
                data-id="{{ total.source._id }}">
        <div class="color_square" style="color: {{ total.color }}">total</div>
    </label></td>
    {% for group_name, lines in line_groups.iteritems() %}
        <td><label>
        <input type="checkbox" class="grouper" data-group-name="{{ outer_loop.index0 }}-{{ group_name }}">
            <div class="color_square">{{ group_name }}</div>
        </label>
        <br/>
        {% for line in lines %}
            <label>
            <input type="checkbox" class="toggler" data-id="{{ line.source._id }}" data-group-name="{{ outer_loop.index0 }}-{{ group_name }}">
            {% for filter, value in line.description.items() %} 
                <div class="color_square" style="color: {{ line.color }}">{{ value }}</div>
            {% endfor %}
            </label><br/>
        {% endfor %}
        </td>
    {% endfor %}
    </tr>
    <td><div id="valency"></div>średnia walencyjna</td>
    </table>
    <canvas width=120 height=70 class="gauge" id="gauge{{ outer_loop.index0 }}"></canvas>
{% endfor %}
</div>

<div id="logo">
    <img alt="Dom Badawczy Maison" src="data:image/png;base64,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"/>
</div>
<div id="client">
    klient: {{ client_name }}<br/>
    nazwa badania: {{ research_name }}<br>
    data: {{ date }}<br>
    próba: {{ sample_size }}
    <br>
</div>
</body>
