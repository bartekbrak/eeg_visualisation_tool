<body>
<table id="mainframe">

    <tr><td></td><td  width="40"></td><td></td><td ></td></tr>
    <tr id="video_row">
        <td class="logo_td" colspan="2">
            <img id="logo" alt="Dom Badawczy Maison" src="data:image/png;base64,{{ brainvision }}"/>
            <div id="client">{{ client_info }}</div>
        </td>
{#        <td></td>#}
        <td id="video_td">
            <div class="video_border_up block"></div>
            <video width=640>
                <source type="video/mp4" src="data:video/mp4;base64,{{video_data}}">
            </video>
            <div class="video_border_down block"></div>
            <svg id="play-icon" class="icons" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1576 927l-1328 738q-23 13-39.5 3t-16.5-36v-1472q0-26 16.5-36t39.5 3l1328 738q23 13 23 31t-23 31z" fill="#fff"/>
            </svg>
            <svg id="pause-icon" class="icons" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                <path d="M1664 192v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45zm-896 0v1408q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-1408q0-26 19-45t45-19h512q26 0 45 19t19 45z" fill="#fff"/>
            </svg>
        </td>
    </tr>
    {% for plot in plots %}
    <tr>
        <td class="gauge_td">
            <div class="gauge_title">{{ titles[loop.index0] }}</div>
            <div class="gauge_wrapper">
                <canvas width=120 height=70 class="gauge" id="gauge{{ loop.index0 }}"></canvas>
            </div>
        </td>
        <td colspan="2" class="plot_td">
            {{ plot }}</td>
        <td class="legend_td">
            <table class="legend" id="legend{{ loop.index0 }}"><tr>


            {# totals #}
            <td><label class="dark_color_square">
                {% set total = totals[loop.index0] %}
                {% set valency = valencies[loop.index0] %}
                <input
                        type="checkbox"
                        class="toggler"
                        checked
                        data-id="{{ total.source._id }}">
                <span class="inliner" style="color: {{ total.color }}">Total</span>
            </label>
            <br/>
            <label class="grad_color_square">
                <input
                        type="checkbox"
                        class="toggler"
                        checked
                        data-id="{{ valency.source._id }}">
                <span class="inliner" style="color: {{ valency.color }}">Åšrednia<div id="valency"></div></span>
            </label>
            </td>
            {% set line_groups = line_groups_per_plot[loop.index0] %}
            {% set outer_loop = loop %}
            {% for group_name, lines in line_groups.iteritems() %}
                <td><label class="dark_color_square">
                <input type="checkbox" class="grouper" data-group-name="{{ outer_loop.index0 }}-{{ group_name }}">
                    <span class="inliner">{{ group_name }}</span>
                </label>
                <br/>
                {% for line in lines %}
                    <label class="grad_color_square">
                    <input type="checkbox" class="toggler" data-id="{{ line.source._id }}" data-group-name="{{ outer_loop.index0 }}-{{ group_name }}">
                    {% for filter, value in line.description.items() %}
                        <span class="inliner" style="color: {{ line.color }}">{{ value }}</span>
                    {% endfor %}
                    </label><br/>
                {% endfor %}
                </td>
            {% endfor %}
            </tr>
{#            <tr class="bottom_gradient">#}
{#                <td></td>#}
{#            {% for _ in line_groups %}#}
{#                <td></td>#}
{#            {% endfor %}#}
{#            </tr>#}
            </table>
        </td>
    </tr>

    {% endfor %}

</table>
{#smileys#}
{#    <svg id="smile{{ loop.index0 }}" class="faces smile" xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 106.059 106.059" xml:space="preserve" enable-background="new 0 0 106.059 106.059"><path d="M90.546 15.518C69.858-5.172 36.199-5.172 15.515 15.513 -5.173 36.198-5.171 69.858 15.517 90.547c20.682 20.684 54.341 20.684 75.027-0.004C111.23 69.858 111.229 36.2 90.546 15.518zM84.757 84.758c-17.494 17.494-45.96 17.496-63.455 0.002 -17.498-17.497-17.496-45.966 0-63.46C38.796 3.807 67.261 3.805 84.759 21.302 102.253 38.796 102.251 67.265 84.757 84.758zM33.24 38.671c0-3.424 2.777-6.201 6.201-6.201 3.423 0 6.2 2.776 6.2 6.201 0 3.426-2.777 6.202-6.2 6.202C36.017 44.873 33.24 42.097 33.24 38.671zM61.357 38.671c0-3.424 2.779-6.201 6.203-6.201 3.423 0 6.2 2.776 6.2 6.201 0 3.426-2.776 6.202-6.2 6.202S61.357 42.097 61.357 38.671zM76.017 64.068c-3.843 8.887-12.843 14.629-22.927 14.629 -10.301 0-19.354-5.771-23.064-14.703 -0.636-1.529 0.089-3.285 1.62-3.921 0.376-0.155 0.766-0.229 1.15-0.229 1.176 0 2.292 0.695 2.771 1.85 2.777 6.686 9.655 11.004 17.523 11.004 7.69 0 14.528-4.321 17.42-11.011 0.658-1.521 2.424-2.222 3.944-1.563S76.675 62.548 76.017 64.068z"/></svg>#}
{#    <svg id="sad{{ loop.index0 }}" class="faces sad"  xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 106.059 106.059" xml:space="preserve" enable-background="new 0 0 106.059 106.059"><path d="M90.546 15.518C69.858-5.172 36.199-5.172 15.515 15.513 -5.173 36.198-5.171 69.858 15.517 90.547c20.682 20.684 54.341 20.684 75.027-0.004C111.23 69.858 111.229 36.2 90.546 15.518zM84.757 84.758c-17.494 17.494-45.96 17.496-63.455 0.002 -17.498-17.497-17.496-45.966 0-63.46C38.796 3.807 67.261 3.805 84.759 21.302 102.253 38.796 102.251 67.265 84.757 84.758zM77.017 74.001c0.658 1.521-0.042 3.286-1.562 3.943 -1.521 0.66-3.286-0.042-3.944-1.562 -2.893-6.689-9.73-11.012-17.421-11.012 -7.868 0-14.747 4.319-17.522 11.004 -0.479 1.154-1.596 1.851-2.771 1.851 -0.384 0-0.773-0.074-1.15-0.23 -1.53-0.636-2.255-2.392-1.62-3.921 3.71-8.932 12.764-14.703 23.063-14.703C64.174 59.371 73.174 65.113 77.017 74.001zM33.24 38.671c0-3.424 2.777-6.201 6.201-6.201 3.423 0 6.2 2.776 6.2 6.201 0 3.426-2.777 6.202-6.2 6.202C36.017 44.873 33.24 42.097 33.24 38.671zM61.357 38.671c0-3.424 2.779-6.201 6.203-6.201 3.423 0 6.2 2.776 6.2 6.201 0 3.426-2.776 6.202-6.2 6.202S61.357 42.097 61.357 38.671z"/></svg>#}
</body>
